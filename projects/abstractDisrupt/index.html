<!DOCTYPE html>
<html>
    <head>
        <title>abstract disrupt</title>

        <style>
            body {
                text-align: center;
                background-color: #2d3638;
            }

            canvas {
                background-color: #1c444f;
            }
        </style>
    </head>

    <body>
        <canvas id="canvas" width="512" height="460"></canvas>

        <script>
            var canvas = document.getElementById("canvas");
            var context = canvas.getContext("2d");
            var width = 512;
            var height = parseInt(width/1.111111111);

            function Player() {
                this.size = width/32;

                this.x = width/2 - this.size/2;
                this.y = height/2 - this.size/2;

                this.right = false;
                this.left = false;

                this.draw = function() {
                    context.beginPath();
                    context.rect(this.x, this.y, this.size, this.size);
                    context.fillStyle = "#c74b28";
                    context.strokeStyle = "#CF5330";
                    context.fill();
                    context.stroke();
                }

                this.update = function() {
                    if (this.right) this.x += 1;
                    if (this.left) this.x -= 1;
                }
            }

            var player = new Player();

            function update() {
                player.update();
            }

            function draw() {
                context.clearRect(0, 0, width, height);
                player.draw();
            }

            var FPS = 60;
            window.requestAnimFrame = (function(){
              return  window.requestAnimationFrame ||
                  window.webkitRequestAnimationFrame ||
                  window.mozRequestAnimationFrame ||
                  function(callback){
                    window.setTimeout(callback, 1000/FPS);
                  }
            })();

            function loop() {
                requestAnimFrame(loop);
                update();
                draw();
            }
            loop();

            document.addEventListener("keydown", function(e) {
                if (e.keyCode === 39) {
                    player.right = true;
                }

                if (e.keyCode === 37) {
                    player.left = true;
                }
            });

            document.addEventListener("keyup", function(e) {
                if (e.keyCode === 39) {
                    player.right = false;
                }

                if (e.keyCode === 37) {
                    player.left = false;
                }
            });
        </script>
    </body>
</html>
